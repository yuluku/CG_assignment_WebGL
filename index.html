<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>スプラトゥーンくじ再現</title>
<script src="https://unpkg.com/three@0.131.3/build/three.min.js"></script>
<script src="https://unpkg.com/three@0.131.3/examples/js/controls/OrbitControls.js"></script>

<style type="text/css">
  .buttonStyle{
  font-family:sans-serif;
  color: #fafdff;
  font-size: 130%;
  background-color:rgba(12, 7, 7, 0.655);
  }
</style>

<body>
  <input id ="button1" type = "button" style="position: absolute; left: 45.5%; top: 75%" class="buttonStyle" value="くじを引く" onclick="kuji_wo_hiku()">
  <input id ="button2" type = "button" style="position: absolute; left: 73%; top: 66%" class="buttonStyle" value="   OK   " onclick="kuji_wo_owaru()">

</body>

<body>
  <script type="text/javascript">
  
  var button_hiku = document.getElementById("button1");
  button_hiku.style.display='none';
  var button_owaru = document.getElementById("button2");
  button_owaru.style.display='none';

  const music_hiku = new Audio('kujiwohiku.mp3');
  const music_kaihuu =new Audio('kaihuu.mp3');
  music_hiku.volume = 0.2;
  music_kaihuu.volume = 0.2;
  

  var gacha_wo_hiku = false;
  var gacha_wo_owaru = false;

  function kuji_wo_hiku() {
      music_hiku.play();
      gacha_wo_owaru = false;
      gacha_wo_hiku = true;
  }

  function kuji_wo_owaru(){
    music_hiku.play();
    gacha_wo_owaru = true;
    //console.log("OKボタンを押した");
  }

  var kaminoku = ['8本足の','amiiboの','B系','DJ','I LOVE','IT界の','VR','愛にあふれた','あいまいな','アウトドアな','アガる','秋色の','秋の','アゲアゲの','朝型の','明日が楽しみな','明日から本気出す','味のある',
  'アタマ屋の','アツアツの','アッサリ系の','あったか～い','圧倒的','あっぱれ','アニメ好きの','アバンギャルド','アブラの乗った','あふれ出る','甘い','アマチュア','甘党の','海女美術大学の','アメカジ','新手の','荒波の',
  'アラマキ砦の','ありふれた','アルティメット','アングラの','いい波乗ってる','イカした','イカす','イカッチャの','イキのいい','石の上にも','異世界の','いちおう','一日','いちにんまえの','いつだって','一本釣りの','いつもの',
  'いなかの','井の中の','今を生きる','今を楽しむ','いわゆる','インク切れの','インクしたたる','インクまみれの','インスタント','インドアな','インド洋の','ヴィジュアル系','ウキワの','宇宙の','うっかりものの','生まれながらの',
  '海の','海辺の','裏通りの','ウルトラ','売れ残った','運まかせの','運命の','えいえんの','映画好きの','笑顔がまぶしい','エスニック系','エターナル','エッジの効いた','エラ呼吸の','エレガントな','エンジョイ','おいしい',
  '老いた','お絵描きする','大きな','大食いの','大空の','オーダーメイドの','おカネが全ての','お魚好きの','おしゃべりな','おしゃれな','推せる','おちゃのこさいさい','お茶の間の','おつかれの','お肉好きの','鬼のような',
  'おませな','オルタナの','音速の','海鮮','海パン','買い物好きの','帰ってきた','かがやく','隠れ上手の','隠れた','かぐわしい','かけだしの','影の','加工された','過去から来た','風の','かたい','ガチ','カチカチの','カバー好きな',
  '神がかった','雷の','カメラ目線の','辛党の','カリスマ','感情的な','完全燃焼した','干潮の','がんばる','カンペキな','記憶のない','キケンな','北大西洋の','北太平洋の','昨日は','気まぐれな','気持ちのこもった','究極の','休日の',
  '強運の','今日が誕生日の','今日だけ特別','今日は','協力好きな','巨大化した','去年の','キラキラな','ギラギラな','霧の中の','きれいめの','金欠の','キンメダイ美術館の','空前絶後の','クールな','くさっても','グッド','クツ屋の',
  'クマサン商会の','グランジ','グルメな','クレーターの','グレート','紅の','芸術的な','ゲーセンの','ゲーミング','けなげな','ケバい','ケバ立つ','限界を超えた','健康的な','研修中の','恋する','好奇心旺盛な','高性能の','硬派な',
  '荒野の','護衛好きな','ゴキゲンな','国民的','孤高の','ゴシック','ゴス','コスパのいい','こってり系の','こどくな','今年の','子どもっぽい','ゴリ押しの','ゴワゴワの','ゴンズイ地区の','混沌の','ザ・','サーモンランの','最強の',
  '最高の','最後の','才色兼備な','最初の','最新型','最前線の','さすらいの','撮影する','ザッカ屋の','ザトウマーケットの','悟った','サバよんだ','さまよえる','サンカクスの','三国一の','残暑の','斬新な','三代目','さんぽ好きの',
  'シェケナダムの','塩味の','シオカラ','仕事好きな','自己流の','自称','自信満々の','時代おくれの','漆黒の','実は','自撮りする','しびれる','渋い','邪悪なる','シャイな','自由自在な','執念深い','週末の','修行の身の','祝・',
  '熟成した','じゅくれんの','純粋な','純白の','瞬発力のある','生涯','小食の','招待された','初夏の','諸行無常の','初代','司令にあこがれる','深海の','新感覚','新世紀','神速の','シンプルな','水そうの中の','スーパー',
  '筋金入りの','スチームパンクな','頭脳明晰な','スプラトゥーンの','スポーティー','すみっこの','スミにおけない','スメーシーワールドの','スライドする','スリムな','世紀の','世紀末','正座中の','成長中の','聖なる','世界三大',
  '世界の中心の','せっかちな','雪原の','刹那の','絶滅危惧種の','攻める','閃光の','全自動','先端を行く','センチメンタルな','センプクする','増殖する','想像以上に','早朝の','組織の','染まらない','空飛ぶ','そんなこんなで',
  '体育会系','大海の','太古の','大事な','だいたんな','大大吉の','大地の','ダイナマイトな','ダイビング','大漁の','大量の','大量発生中の','ダシがとれる','戦う','ただの','たつじんの','たったひとりの','立ってプレイする',
  '頼もしい','小さな','地下生まれの','秩序の','チョウザメ造船の','超人的','チョーシあげたい','チョーシいい','チョーシサイコーの','チョーシぼちぼちの','直撃する','直感を信じる','ちょっぴり','通称','付け焼き刃の','つっぱしる',
  'つめた～い','強気な','つるつるの','データで戦う','デカい','テキトーな','電光石火の','転生した','でんせつの','電池切れの','天日干しの','動じない','都会の','トガった','時の','トゲトゲの','ととのった','とどろく',
  'となりの','トラディショナルな','とれたての','トレンディーな','トレンドの','ドロドロの','どん欲な','ナイスな','渚の','泣く子もだまる','ナゾの','ナチュラルな','夏色の','夏の','夏休みの','涙の','波乗り','ナメロウ金属の',
  '名もなき','ナワバトラー道場の','南極海の','なんてったって','肉厚な','逃げ足の速い','逃げる','二代目','日中の','人気が出てきた','塗りたくる','塗りの','ヌルヌルの','寝起きの','寝転ぶ','ねばり強い','眠れる','のびしろのある',
  'のんびりやの','ハードな','ハートを撃ちぬく','ハイカラシティの','ハイカラスクエアの','ハイカラな','配信終わりの','配信中の','ハイブランド好きの','白昼の','はじける','はじめての','走り回る','バズりたい','はたらく','発光する',
  'ハッピーな','ハデな','破天荒な','はねる','早撃ち','早起きな','流行りの','腹ペコの','春色の','遥か彼方の','春の','バンカラ街の','バンカラな','バンカラマッチの','パンク','犯人は','はんにんまえの','ハンパない','汎用型',
  'ヒーローになりたい','ヒーローモードの','ヒエヒエの','ひかえめな','比較的','干潟の','光の','ヒゲの','久しぶりの','びしょぬれの','左利きの','ピチピチの','ビッグな','引っこみ思案な','必殺の','ヒップホップ','秘伝の','秘密の',
  '百発百中の','昼型の','広場の','ファッショナブル','ブキ屋の','フク屋の','不思議の国の','ふつうの','ふとんの中の','船酔いした','冬色の','冬の','冬休みの','プライベートマッチの','ブラックな','フルーツ好きの','古着',
  'フルスロットル','プルプルの','フレッシュな','プロ級','ふわふわの','文化系','平日の','ペラペラの','変幻自在の','吠える','北極海の','ポップな','ホットな','炎の','ボムの','ホワイトな','舞い降りた','迷子の','負けずぎらいな',
  'まことの','マサバ海峡大橋の','まじめな','真っ赤な','真っ黒な','真っ青な','真っ白な','マテガイ放水路の','まな板の上の','真夏の','マヒマヒリゾート＆スパの','真冬の','守る','真夜中の','丸腰の','マンガ好きの','満潮の',
  'ミーハーな','右利きの','水の','南大西洋の','南太平洋の','ミュート中の','未来から来た','ミラクル','ムキムキの','無口な','無限の','無慈悲な','無邪気な','無敵の','ムニ・エール海洋発電所の','無味無臭の','名誉','目立ちたがりな',
  '目力の強い','めでたい','もう負けられない','もう迷わない','モードな','モーレツな','モダンな','モッズ','もふもふの','森の','ヤガラ市場の','野菜好きの','優しい','野生の','やっぱり','山の','闇の','やわらかい','ヤンチャな',
  '唯一無二の','夕暮れ時の','ユノハナ大渓谷の','夢見がちな','ゆるふわ','夜明けの','よく漬かった','よくばりな','よごれた','夜ふかしの','夜型の','弱気な','来年の','ラッキーな','ラッシュ中の','リアリストな','リアルな','リッチな',
  '両利きの','旅行好きの','ルーズな','冷静沈着な','レギュラーマッチの','レトロな','ロカビリー','ロックな','ロビーの','論理的な','ワイプアウトの','ワイルドな','若い','わかばマークの','私は','Xマッチの','クサヤ温泉の','激レアの',
  '立ちこぎの','トリカラマッチの','長そでの','難破船ドン・ブラコの','ヒラメが丘団地の','モノクロの'];

  var shimonoku = ['.52ガロン使い','.96ガロン使い','14式竹筒銃使い','1号','2号','3号','4Kスコープ使い','4号','8号','ABXYファン','AI','Bガール','Bボーイ','C-Sideファン','CEO','Dedf1shファン','DJ','DNA','From Bottomファン',
  'H3リールガン使い','Hightide Eraファン','L3リールガン使い','LACT-450使い','LOVE','N-ZAP使い','OCTOTOOLファン','Rブラスターエリート使い','SashiMoriファン','Squid Squadファン','Tシャツ好き','Wet Floorファン','-3ファン',
  'アーティスト','愛好家','アイツ','アイドル','アイロニック好き','アウトロー','アオリファン','赤ちゃん','アキレス腱','アシスタント','アシメ','アスリート','アタマ屋常連','アタリメイド好き','暑がり','アナアキ好き','アナログゲーマー',
  'アフロ','アメフラシ使い','荒くれ者','アルバイター','アロメ好き','アンドロイド','イイダファン','委員長','イカ','イカ省略','イカスミ','イカノボラー','イカライフ','イカリング','イカローラー','イクラ','一文無し','逸材','一般人','一匹狼',
  'イヌ','命','いもうと','イルカ','インク','インクリング','インフルエンサー','ヴァリアブルローラー使い','ヴィラン','ウェービー','ウェット','打ち上げ花火','宇宙飛行士','ウツボ','ウツボ使い','ウツホファン','海の幸','海坊主','海人',
  'ウルトラショット使い','ウルトラハンコ使い','エイ','エージェント','エクスプロッシャー使い','エゾッコ好き','エナジースタンド使い','エレガンス','エンペリー好き','王者','オーバーフロッシャー使い','オオモノ','オールバック','オールラウンダー',
  'おかあさん','オカシラ','オクタリアン','オクトリング','お子様','おじいさん','おじさん','おじょうさま','お寿司','オタク','おだんご','追っかけ','おつまみ','おでん','おとうさん','おとうと','踊り子','鬼','おにいさん','おねえさん','おばあさん',
  'オバケ','おばさん','おぼっちゃま','オマケ','お祭り好き','親分','温泉好き','カードゲーマー','カードコレクター','カーボンローラー使い','カーリーヘア','カーリングボム使い','ガール','会社員','海水魚','会長','鏡','係長','ガキ大将','学生','歌手',
  '家族','ガチアサリ好き','ガチアサリマスター','ガチエリア好き','ガチエリアマスター','ガチホコバトル好き','ガチホコマスター','ガチヤグラ好き','ガチヤグラマスター','合食禁ファン','カニタンク使い','カベ','カメ','カメラマン','カモン','カラー',
  'からあげ','カラダ','カリスマ','カルパッチョ','カレントリップファン','観光客','監督','管理人','キーボーディスト','記憶','着こなし','騎士','希少部位','ギタリスト','気分','キャンパー','キャンピングシェルター使い','ギャンブラー','キューインキ使い',
  'キューバンボム使い','キューピッド','兄弟','恐竜','魚介類','巨人','魚拓','切りこみ隊長','切り身','極めし者','キング','筋肉','クアッドホッパー使い','クイーン','食いしんぼう','クイックボム使い','クーゲルシュライバー使い','草','クツ屋常連',
  'クマ','クラーゲス好き','クラゲ','クラッシュブラスター使い','クラブ','クリエイター','グルーヴ','グレートバリア使い','玄人','軍艦巻き','警備員','ゲーマー','毛玉','ケルビン525使い','研究員','原始人','小悪魔','工場長','後輩','コーチ','コーデ',
  'コーディネーター','コーンロウ','コブシ','子分','コメディアン','サーファー','サーモンラン好き','サーモンランマスター','サイエンティスト','最終兵器','刺身','作家','ザッカコレクター','ザッカ屋常連','サバイバー','サブカル好き','サポーター',
  '寒がり','サムライ','サメ','サメ使い','サメライド使い','残像','参謀','三枚目','シーフード','ジェットスイーパー使い','ジェットパック使い','シオカラーズファン','シグレニ好き','仕事人','師匠','シスターズ','したっぱ','視聴者','シチリン好き',
  '執事','シティガール','シティボーイ','四天王','姉妹','ジムワイパー使い','ジモン好き','シャープマーカー使い','若輩者','シャケ','ジャケット好き','シャケライフ','社長','シャツ好き','舎弟','ジャンパー','ジャンプビーコン使い','従業員','自由人',
  '守護神','潤滑油','上司','ショートカット','職人','ショクワンダー使い','助手','初心者','ショップ店員','真実','新人王','新人バイト','人生','新入生','新婦','人類','新郎','スイッチヒッター','スイマー','スクイックリン使い','スクリュースロッシャー使い',
  'スケーター','スタイル','ストライカー','ストリーマー','スニーカー好き','頭脳','スパイ','スパイガジェット使い','スパッタリー使い','スプラシューター使い','スプラスコープ使い','スプラスピナー使い','スプラチャージャー使い','スプラッシュシールド使い',
  'スプラッシュボム使い','スプラマニューバー使い','スプラローラー使い','スプリンクラー使い','スライダー','すりみ','すりみ連合ファン','スルメ','スロースターター','責任者','節約家','ゼラチン','セレブ','全一','戦士','先生','仙人','センパイ',
  'ソイチューバー使い','ソムリエ','存在','村長','大会出場者','大臣','大統領','タイトルホルダー','ダイナモローラー使い','代表','台風の目','太陽','タコ','タコスミ','タコゾネス','タコライフ','タタキ','タタキケンサキ好き','盾','タテロール',
  '旅人','タマゴ','団員','ダンサー','タンサンボム使い','淡水魚','探偵','チャレンジャー','チャンピオン','チャンプルー','挑戦者','ちょんまげ','ツインテ','月','漬け','ツッコミ','釣り人','ツンツン','デザイナー','弟子','デュアルスイーパー使い',
  '天才','天使','テンタクルズファン','頭足類','頭皮','豆腐','島民','トーピード使い','読書家','登山家','ドジっ子','トライストリンガー使い','ドライバー','ドライブワイパー使い','ドラゴン','トラップ使い','ドラマー','鳥','取締役','トリプルトルネード使い',
  'トルネード','トレーナー','丼','ナイス','ナイスダマ使い','仲間','夏祭り','ナマケモノ','ナマズ','涙','ナワバトラー','ナワバリバトル好き','ナワバリマスター','ニット好き','二枚貝','二枚目','人気者','ニンゲン','ニンジャ','ネコ','熱血漢',
  'ノヴァブラスター使い','ノーチラス使い','バーサーカー','パーティー好き','配管工','バイキング','配信者','ハイドラント使い','バイトリーダー','バイリンガル','パイロット','破壊神','博士','はぐれ者','バケットスロッシャー使い','覇者','馬車馬','働き者',
  'ぱっつん','バトロイカ好き','花','はにかみやさん','パパ','パブロ使い','パラシェルター使い','バラズシ好き','パリピ','バレルスピナー使い','半魚人','ハンター','番長','反復横とび','ヒーロー','ヒーローモード好き','ヒーローモードマスター','秘書',
  'ビタミン','ビッグマウス','ヒッセン使い','人見知り','ヒメファン','干物','美容師','漂流物','ひれおくん','ピン芸人','ファイター','ファッショニスタ','ファッションリーダー','ファンタジー','フウカファン','ブーツ好き','フェード','フォーリマ好き',
  '部下','ブキ屋常連','副社長','フク屋常連','節','部長','プライムシューター使い','ブラザーズ','プランクトン','ブランド好き','プランナー','フリーク','フリーランス','ブリザード','プリンス','プリンセス','フレンド','プログラマー','プロデューサー',
  'プロモデラー使い','ベイビー','ペインター','ベーシスト','ヘッズ','ペット','ヘッドライナー','ベテラン','ポイズンミスト使い','ポイントセンサー使い','冒険家','ぼうし好き','ボウズ','方程式','ボーイ','ボーカル','ボードゲーマー','ボールドマーカー使い',
  'ホクサイ使い','ボケ','ホコ','捕食者','ボス','ホタックス好き','ホタルファン','ホッコリー好き','ホットブラスター使い','ホップソナー使い','ボディガード','ボトルガイザー使い','ポニテ','哺乳類','ボマー','マーメイド','魔王','孫','マスク','マスター',
  'マッシュ','的','マドンナ','マニア','マネージャー','魔法使い','ママ','マルチミサイル使い','マンガ家','マンタローファン','ミステリー','ミツアミ','虫','息子','娘','むぞうさ','名人','メガネ好き','めがねっ子','メガホンレーザー5.1ch使い',
  'メンタル','メンバー','申し子','モデル','モヒカン','役者','ヤコ好き','勇者','雪だるま','ライター','ライフスタイル','ラインマーカー使い','ラッキーマン','ラッパー','ラピッドブラスター使い','リーゼント','リーダー','リッター4K使い','リモートワーカー',
  '竜宮城','漁師','料理人','ルーキー','ルック','浪人','ロッカーマニア','ロッケンベルグ好き','ロボット','ロボットボム使い','ロングブラスター使い','ロングヘア','ロンゲ','わかばシューター使い','若者','Front Roeファン','R-PEN使い','思い出','自転車乗り',
  'スタイリスト','スペースシューター使い','天然記念物','ビジー・バケーションファン','ワイドローラー使い'];

  </script>
</body>


<style type="text/css">
div#canvas-frame{
  border: none;
  cursor: pointer;
  width: 1400px;
  height: 750px;
  background-color: #EEEEEE;
}
</style>
<script>
  var renderer;
  function initThree() {
    width = document.getElementById('canvas-frame').clientWidth;
    height = document.getElementById('canvas-frame').clientHeight;  
    renderer = new THREE.WebGLRenderer({antialias: true, alpha: true});// メッシュの輪郭をなめらかに」表示、透過有効
    renderer.setSize(width, height);//幅と高さを設定
    document.getElementById('canvas-frame').appendChild(renderer.domElement);//div要素にcanvasを追加
    renderer.setClearColor(0x7d7b83, 1.0);
    renderer.setPixelRatio(window.devicePixelRatio); //高解像度対応 これやると黒くなる
  }
   
  var camera, controls;
  function initCamera() {  
    //遠近感のあるカメラ(視野角,上映するスクリーンの縦横比,カメラから手前までの距離,カメラから奥までの距離)
    camera = new THREE.PerspectiveCamera( 45 , width / height , 1 , 10000 );
    camera.position.set(600, 0, 100); //(x,y,z)
    //空間の中での上方向
    camera.up.x = 0;
    camera.up.y = 0;
    camera.up.z = 1;
    camera.lookAt( {x:0, y:0, z:0 } );//カメラの視点（注視点）
    controls = new THREE.OrbitControls(camera,renderer.domElement); // カメラを360度移動 
    //console.log(camera);
  }

  function kakudaiCamera() {  
    //遠近感のあるカメラ(視野角,上映するスクリーンの縦横比,カメラから手前までの距離,カメラから奥までの距離)
    camera = new THREE.PerspectiveCamera( 45 , width / height , 1 , 10000 );
    camera.position.set(400, 0, 70); //(x,y,z)
    //空間の中での上方向
    camera.up.x = 0;
    camera.up.y = 0;
    camera.up.z = 1;
    camera.lookAt( {x:0, y:0, z:0 } );//カメラの視点（注視点）
    controls = new THREE.OrbitControls(camera,renderer.domElement); // カメラを360度移動 
  }

  var scene;
  function initScene() {    
    scene = new THREE.Scene();
  }
  var light, light2, light3, light4, light5, light6;
  function initLight() {  
    //平行光源(ディレクショナルライト)：一方向から同じ強さで平行に照らすライト(色, 光の強さ)
    light = new THREE.DirectionalLight(0xFFFFFF, 0.5);
    //ライトの位置
    light.position.set( -100, -120, 50 );
    scene.add(light);

    //
    light2 = new THREE.DirectionalLight(0xFFFFFF, 0.5);
    //ライトの位置
    light2.position.set( -100, 60, 20 );
    scene.add(light2);

    //ガチャのガラスの底から点光源 色、光の強さ、距離、光の減衰率
    light3 = new THREE.PointLight(0xFFFFFF, 1, 150,0.5);
    light3.position.set(0,0,-50);
    scene.add(light3);

    //ガチャのガラスの底から平行光源
    light4 = new THREE.DirectionalLight(0xFFFFFF, 1.5);
    light4.position.set(0,0,-50);
    scene.add(light4);

    //ガチャのガラスの後ろから平行光源
    light5 = new THREE.DirectionalLight(0xFFFFFF, 1);
    light5.position.set(-100, -70, 90);
    scene.add(light5);

    //ガチャのガラスの手前から平行光源
    light6 = new THREE.DirectionalLight(0xFFFFFF, 0.8);
    light6.position.set(100, 40, -90);
    scene.add(light6);

    //環境光源(アンビエントライト)：すべてを均等に照らす、影のない、全体を明るくするライト
    //const ambient = new THREE.AmbientLight(0x404040,0.1);
    const ambient = new THREE.AmbientLight(0xffffff,0.5);//めちゃ白くなる
    scene.add(ambient); //シーンにアンビエントライトを追加
  }


var gacha, yuka, yellow_yuka, yellow_yuka_mini, silver_bottom1, silver_bottom2, silver_bottom3;
var black_enchu, black_enchu_top, silver_middle1, silver_middle2, silver_middle3, glass_sphere, glass_sphere2;
var capsule1, capsule2, capsule3,capsule4,capsule5,capsule6,capsule7,capsule8,capsule9,capsule10,capsule11, capsule12, capsule13, capsule14;
var ukezara, ukezara_senaka;
var lever, lever_silver, gacha_kekka;
var kekka,textGeometry,textMaterial,text, text2;
function initObject(){
  
  //床
  yuka = new THREE.Mesh(
      // width, height, widthsegment(基本1), hightsegment(基本1)
      new THREE.PlaneGeometry(1000, 1000, 1, 1),
      new THREE.MeshLambertMaterial({color:0x474a4d})
  );
  yuka.position.set(0,0,-100);


  //下の黄色いとこ
  yellow_yuka = new THREE.Mesh(
    new THREE.CylinderGeometry(85,85,1,100),
    new THREE.MeshLambertMaterial({color:0xffff00})
  );
  yellow_yuka.rotation.x = Math.PI/2;
  yellow_yuka.position.set(0,0,-99.5);

  //下の黄色いとこ（小さい方）
  yellow_yuka_mini = new THREE.Mesh(
    new THREE.CylinderGeometry(25,25,1,30),
    new THREE.MeshLambertMaterial({color:0xffff00})
  );
  yellow_yuka_mini.rotation.x = Math.PI/2;
  yellow_yuka_mini.position.set(75,75,-99.5);

  //ガチャの下の銀色の部分一番下
  silver_bottom1 = new THREE.Mesh(
    //ドーナツ型
    //芯円の半径、断面円の半径、断面円の分割数、芯の円の分割数、中心角
    new THREE.TorusGeometry(60,3,100,100),
    new THREE.MeshStandardMaterial({color: 0x626063, roughness:0.5})
  );
  silver_bottom1.position.set(0,0,-99);

  //ガチャの下の銀色の部分真ん中
  silver_bottom2 = new THREE.Mesh(
    //ドーナツ型
    //芯円の半径、断面円の半径、断面円の分割数、芯の円の分割数、中心角
    new THREE.TorusGeometry(58,3,100,100),
    new THREE.MeshStandardMaterial({color: 0x626063, roughness:0.5})
  );
  silver_bottom2.position.set(0,0,-95);

  //ガチャの下の銀色の部分一番上
  silver_bottom3 = new THREE.Mesh(
    //ドーナツ型
    //芯円の半径、断面円の半径、断面円の分割数、芯の円の分割数、中心角
    new THREE.TorusGeometry(56,3,100,100),
    new THREE.MeshStandardMaterial({color: 0x626063, roughness:0.5})
  );
  silver_bottom3.position.set(0,0,-91);

  //ガチャの黒いとこ
  black_enchu = new THREE.Mesh(
    new THREE.CylinderGeometry(56,56,70,100),
    new THREE.MeshLambertMaterial({color:0x0d0015})
  );
  black_enchu.rotation.x = Math.PI/2;
  black_enchu.position.set(0, 0, -67);

  //ガチャの黒いとこの上の丸み
  black_enchu_top = new THREE.Mesh(
    new THREE.TorusGeometry(53.9,2,100,100),
    new THREE.MeshLambertMaterial({color:0x0d0015})
  );
  black_enchu_top.position.set(0,0,-31.5);

  //ガチャの真ん中の銀色の部分一番下
  silver_middle1 = new THREE.Mesh(
    //ドーナツ型
    //芯円の半径、断面円の半径、断面円の分割数、芯の円の分割数、中心角
    new THREE.TorusGeometry(47,3,100,100),
    new THREE.MeshStandardMaterial({color: 0x626063, roughness:0.5})
  );
  silver_middle1.position.set(0,0,-29);
  //ガチャの真ん中の銀色の部分真ん中
  silver_middle2 = new THREE.Mesh(
    //ドーナツ型
    //芯円の半径、断面円の半径、断面円の分割数、芯の円の分割数、中心角
    new THREE.TorusGeometry(45,3,100,100),
    new THREE.MeshStandardMaterial({color: 0x626063, roughness:0.5})
  );
  silver_middle2.position.set(0,0,-25);
  //ガチャの真ん中の銀色の部分一番上
  silver_middle3 = new THREE.Mesh(
    //ドーナツ型
    //芯円の半径、断面円の半径、断面円の分割数、芯の円の分割数、中心角
    new THREE.TorusGeometry(43,3,100,100),
    new THREE.MeshStandardMaterial({color: 0x626063, roughness:0.5})
  );
  silver_middle3.position.set(0,0,-21);

  //水色ガラス
  glass_sphere = new THREE.Mesh(
    new THREE.SphereGeometry(85,100,100),
    //new THREE.MeshLambertMaterial({color:0xa0d8ef})
    new THREE.MeshPhongMaterial({color:0x00a1e9})
  );
  glass_sphere.material.opacity = 0.3;//透明度、0:透明 1:不透明
  glass_sphere.material.transparent = true;//透過を許可するかどうか
  glass_sphere.material.depthTest = true;//陰面処理(ある視点から見えない部分の面を消去する)を有効化するか
  glass_sphere.position.set(0, 0, 58);

  glass_sphere2 = new THREE.Mesh(
    new THREE.SphereGeometry(80,100,100),
    new THREE.MeshLambertMaterial({color:0xa0d8ef})
    //new THREE.MeshPhongMaterial({color:0x00a1e9})
  );
  glass_sphere2.material.opacity = 0.3;//透明度、0:透明 1:不透明
  glass_sphere2.material.transparent = true;//透過を許可するかどうか
  glass_sphere2.material.depthTest = true;//陰面処理(ある視点から見えない部分の面を消去する)を有効化するか
  glass_sphere2.position.set(0, 0, 58);



  //カプセル
  capsule1 = new THREE.Mesh(
    new THREE.SphereGeometry(17,100,100),
    new THREE.MeshPhongMaterial({color:0xd70035}) //右下の赤
  );
  capsule1.material.opacity = 0.8;
  capsule1.position.set(-25,45,15);

  capsule2 = new THREE.Mesh(
    new THREE.SphereGeometry(17, 100, 100),
    new THREE.MeshPhongMaterial({color:0x19448e}) //青　手前
  );
  capsule2.material.opacity = 0.8;
  capsule2.position.set(35,20,65);

  capsule3 = new THREE.Mesh(
    new THREE.SphereGeometry(17,100,100),
    new THREE.MeshPhongMaterial({color:0x56256e}) //紫　手前
  );
  capsule3.material.opacity = 0.8;
  capsule3.position.set(45,-40,63);

  capsule4 = new THREE.Mesh(
    new THREE.SphereGeometry(17,100,100),
    new THREE.MeshPhongMaterial({color:0x56256e}) //紫　奥
  );
  capsule4.material.opacity = true;
  capsule4.position.set(-60,-20,80);

  capsule5 = new THREE.Mesh(
    new THREE.SphereGeometry(17,100,100),
    new THREE.MeshPhongMaterial({color:0x56256e}) //紫　中
  );
  capsule5.material.opacity = true;
  capsule5.position.set(-20,-30,15);

  capsule6 = new THREE.Mesh(
    new THREE.SphereGeometry(17, 100, 100),
    new THREE.MeshPhongMaterial({color:0x19448e}) //青　上
  );
  capsule6.material.opacity = true;
  capsule6.position.set(-15,10,90);

  capsule7 = new THREE.Mesh(
    new THREE.SphereGeometry(17, 100, 100),
    new THREE.MeshPhongMaterial({color:0x19448e}) //青　下
  );
  capsule7.material.opacity = true;
  capsule7.position.set(20,-35,5);

  capsule8 = new THREE.Mesh(
    new THREE.SphereGeometry(17,100,100),
    new THREE.MeshPhongMaterial({color:0xd70035}) //左手前の赤
  );
  capsule8.material.opacity = 0.8;
  capsule8.position.set(13,-50,55);

  capsule9 = new THREE.Mesh(
    new THREE.SphereGeometry(17, 100, 100),
    new THREE.MeshPhongMaterial({color:0x19448e}) //青 左奥
  );
  capsule9.material.opacity = 0.8;
  capsule9.position.set(-20,-60,55);

  capsule10 = new THREE.Mesh(
    new THREE.SphereGeometry(17,100,100),
    new THREE.MeshPhongMaterial({color:0x24140e}) //銀というか黒　右
  );
  capsule10.material.opacity = 0.8;
  capsule10.position.set(-20,40,65);

  capsule11 = new THREE.Mesh(
    new THREE.SphereGeometry(17,100,100),
    new THREE.MeshPhongMaterial({color:0x24140e}) //銀というか黒　下
  );
  capsule11.material.opacity = 0.8;
  capsule11.position.set(10,10,20);

  capsule12 = new THREE.Mesh(
    new THREE.SphereGeometry(17, 100, 100),
    new THREE.MeshPhongMaterial({color:0x19448e}) //青　奥下
  );
  capsule12.material.opacity = 0.8;
  capsule12.position.set(-35,5,10);

  capsule13 = new THREE.Mesh(
    new THREE.SphereGeometry(17,100,100),
    new THREE.MeshPhongMaterial({color:0x24140e}) //銀というか黒　真ん中奥
  );
  capsule13.material.opacity = 0.8;
  capsule13.position.set(-45,15,45);

  capsule14 = new THREE.Mesh(
    new THREE.SphereGeometry(17,100,100),
    new THREE.MeshPhongMaterial({color:0x24140e}) //銀というか黒　真ん中奥
  );
  capsule14.material.opacity = 0.8;
  capsule14.position.set(-10,-30,85);

  ukezara = new THREE.Mesh(
    //radius,widthsegments,heightsegments,phistart,philength,thetastart,thetalength
    new THREE.SphereGeometry(20,32,16,Math.PI,4.9,0,3.14159),
    new THREE.MeshLambertMaterial({color:0xabb1b5})
  );
  ukezara.material.opacity = 1;//透明度、0:透明 1:不透明
  ukezara.material.transparent = false;//透過を許可するかどうか
  ukezara.material.depthTest = true;
  ukezara.position.set(60,0,-75);

  ukezara_senaka = new THREE.Mesh(
    //半径、角度の分割、開始角度、中心角度
    new THREE.CircleGeometry(19,100),
    new THREE.MeshLambertMaterial({color:0x8da0b6})
  );
  ukezara_senaka.rotation.y = Math.PI/2;
  ukezara_senaka.material.transparent = false;
  ukezara_senaka.material.depthTest = true;
  ukezara_senaka.position.set(57,0,-75);

  lever = new THREE.Mesh(
    //幅、高さ、深さ、widthsegments, heightsegments,depthsegments
    new THREE.BoxGeometry(7,30,13),
    new THREE.MeshLambertMaterial({color:0xffff00})
  );
  lever.position.set(59,0,-40);

  //レバーの後ろの銀色のところ
  lever_silver = new THREE.Mesh(
    new THREE.BoxGeometry(3,40,20),
    new THREE.MeshStandardMaterial({color: 0x626063, roughness:0.5})
  );
  lever_silver.position.set(55,0,-40);

  //矢印の三角形部分
  var yazirushi = new THREE.Mesh(
    new THREE.TetrahedronGeometry(10,0),
    new THREE.MeshLambertMaterial({color: 0x626063})
  );
  
  yazirushi.rotation.y = Math.PI/4;
  yazirushi.rotation.z = Math.PI/3;
  yazirushi.rotation.y = Math.PI/7;
  yazirushi.rotation.x = Math.PI;
  yazirushi.rotation.x = Math.PI/12;
  
  yazirushi.position.set(50,-30,-40);

  //矢印の三角形じゃない方
  var yazirushi2 = new THREE.Mesh(
    //ドーナツ型
    //芯円の半径、断面円の半径、断面円の分割数、芯の円の分割数、中心角
    new THREE.TorusGeometry(30,3,100,100,1.2),
    new THREE.MeshLambertMaterial({color: 0x626063})
  );
  yazirushi2.rotation.y = Math.PI/2;
  yazirushi2.rotation.z = Math.PI + Math.PI/6 + Math.PI/4;
  
  yazirushi2.position.set(50,-3,-50);



  gacha = new THREE.Group(); //メッシュをグループ化
  gacha.add(yuka, yellow_yuka, yellow_yuka_mini, silver_bottom1, silver_bottom2, silver_bottom3,black_enchu, black_enchu_top, silver_middle1, silver_middle2, silver_middle3, glass_sphere, glass_sphere2);
  gacha.add(capsule1, capsule2, capsule3, capsule4, capsule5, capsule6,capsule7,capsule8,capsule9,capsule10,capsule11,capsule12,capsule13, capsule14);
  gacha.add(ukezara, ukezara_senaka,lever, lever_silver, yazirushi, yazirushi2);
  scene.add(gacha);

  gacha_kekka = new THREE.Mesh(
                new THREE.BoxGeometry(2,200,100),
                new THREE.MeshLambertMaterial({color: 0x626063})
  );
  gacha_kekka.position.set(200,0,50);

  
  

  kekka = new THREE.Group();
  kekka.add(gacha_kekka)

  scene.add(kekka);
  kekka.visible=false;
}

var time = 0;
  function threeStart() {
    time = 0;
    initThree();
    initCamera();
    initScene();    
    initLight();
    initObject();
    
    function render() {
            
            requestAnimationFrame(render); //再度render関数を実行
            renderer.render(scene, camera); //シーン, カメラをもとに描画
            //console.log("あ"+gacha_wo_hiku+" "+time);
            if(gacha_wo_hiku){
              //console.log("456行目");
              if(time == 0){
                kakudaiCamera();
                
                button_hiku.style.display='none';
              }
              time+=1;
              if(time <= 180 && time%10 == 0) {
                //console.log("レバーの回転");
                lever.rotation.x -= Math.PI/9;
                //console.log("い");
              }
              if(time == 250){
                var random_kami = Math.floor( Math.random() * kaminoku.length );
                var random_shimo = Math.floor( Math.random() * shimonoku.length );
                console.log(kaminoku[random_kami]+" "+shimonoku[random_shimo]);
                kakudaiCamera();

                const fontLoader = new THREE.FontLoader();
                fontLoader.load("RocknRollOne_Regular.json", (font) => {
                //console.log("loaded font!!");
                textGeometry = new THREE.TextGeometry(kaminoku[random_kami]+" "+shimonoku[random_shimo], {
                  font: font,
                  size: 8,
                  height: 1,
                  curveSegments: 12,
                  bevelEnabled: true,
                  bevelThickness: 0.03,
                  bevelSize: 0.02,
                  bevelOffset: 0,
                  bevelSegments: 5,
                });
                textGeometry.center();

                textMaterial = new THREE.MeshStandardMaterial({color:0xf5f5f5});
                text = new THREE.Mesh(textGeometry, textMaterial);
                text.castShadow = true;
                text.position.set(205,0,50);
                text.rotation.x = Math.PI/2;
                text.rotation.y = Math.PI/2;
                scene.add(text);
                });
                kekka.visible=true;
                music_kaihuu.play();
                button_owaru.style.display='block';

              }
              if(gacha_wo_owaru || time == 1000){
                //console.log("OKを押したかtimeが1000になった");
                
                button_owaru.style.display='none';
                kekka.visible = false;
                initCamera();
                scene.remove(text);
                time=0;
                button_hiku.style.display='block';
                gacha_wo_owaru = false;
                gacha_wo_hiku = false;
                //window.location.reload(); //リロード(リセット)
              }
            }

    }
    render();
    //console.log("う");
    button_hiku.style.display='block';
  }
</script>
</head>
 
<body onload="threeStart();">
<div id="canvas-frame"></div>
</body>
</html>
